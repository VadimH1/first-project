
<!DOCTYPE html>
<html>

<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

</head>

<body>
  <img src="https://cdn1.iconfinder.com/data/icons/space-flat-galaxy-radio/512/laser_gun-256.png" alt="">

  
    <form action="/" method="POST">
        <label for="fname">First name:</label><br>
        <input type="text" id="fname" name="fname"><br>
        <label for="lname">Last name:</label><br>
        <input type="text" id="lname" name="lname"><br><br>
        <input type="submit" value="Submit"><br><br>
    </form> 
    {% if income_form_data %}
        <h1>{{income_form_data.fname}}</h1><h1>{{income_form_data.lname}}</h1>
    {% endif %}

<hr>  
  <!-- Username <input type="text" name="username"><br><br> -->
  <input type="button" id="logoutButton" name="logoutButton" class="btn btn-danger" value="Logout"><br>

</body>
</html>

<!-- <html>
  <head>
    <title>File Upload</title>
  </head>
  <body>
    <h1>File Upload</h1>
    <form method="POST" action="" enctype="multipart/form-data">
      <p><input type="file" name="file"></p>
      <p><input type="submit" value="Submit"></p>
    </form>
  </body>
</html> -->


<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <title>Page Title</title>
</head>

<body>
  
<hr>

    <div>
        <a href="/login" style="visibility: visible;" id="loginPageLink"><h1>Login Page</h1></a><br>
      <hr>  
        <a href="/register" style="visibility: visible;" id="registerPageLink"><h1>Register page</h1></a><br>
      <hr>  
        <a href="/create-post" style="visibility: hidden;" id="createPostLink"><h1>Create Post</h1></a>
      <hr>
        <a href="/create-comments" style="visibility: hidden;" id="createCommentLink"><h1>Create Comments</h1></a> 
      <hr>
        <a href="/posts" style="visibility: hidden;" id="allPostsLink"><h1>Posts</h1></a> 
    </div>

</body>

<script type="text/javascript">
    var token = localStorage.getItem('token');
    if (token){
        $( "#loginPageLink").css( "visibility", "hidden" );
        $( "#registerPageLink").css( "visibility", "hidden" );
        $("#createPostLink").css("visibility", "visible");
        $("#createCommentLink").css("visibility", "visible");
        $("#allPostsLink").css("visibility", "visible");
    }
    $('#logoutButton').on('click', function(){
      localStorage.removeItem('token');
      var url = '/'
      $(location).attr('href', url);
    });
</script>

<div id="allPosts" class="shadow p-3 mb-5 bg-body rounded"><h2>Blog Posts :</h2></div>   
    <script>
        var token = localStorage.getItem('token');
        $.ajax({
            url: "/api/v1/posts",
            method: "GET",
            headers: {"Authorization": token},
            success: function(result) {
              // for (var value in result) {
              //   $("#allPosts").append(`<a href="/posts/${value.id}"> ${value.title}</a>`) //(`${value}: ${result[value]}`);//$("#allPosts").append;
              //   } 
              $.each(result, function( index, value ) {
                $("#allPosts").append('<li>Id: ' + value.id + ' - Title: ' + value.title + ' - Body: ' + value.body + '</li>');
                $("#allPosts").append(`<a href="/post/${value.id}" class="btn btn-primary btn-sm">Post</a><br><br>`);
              })    
            },
            error: function(msg) {
              console.error(msg);
            } 
        })
    </script>      
<!-- <script type="text/javascript">
    $( "#changeTextInput" ).on('input', function() {
    console.log(this);
    var incomeText = $(this).val();
    $( "#textHeading" ).text(incomeText);
    $( "#textParagraph" ).text(incomeText);
});
</script> -->

</html>